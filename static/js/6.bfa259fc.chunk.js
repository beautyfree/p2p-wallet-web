(this["webpackJsonp@p2p-wallet-web/web"]=this["webpackJsonp@p2p-wallet-web/web"]||[]).push([[6],{1235:function(e,n,t){"use strict";t.d(n,"B",(function(){return c})),t.d(n,"m",(function(){return o})),t.d(n,"y",(function(){return s})),t.d(n,"g",(function(){return l})),t.d(n,"e",(function(){return i})),t.d(n,"d",(function(){return u})),t.d(n,"a",(function(){return m})),t.d(n,"c",(function(){return d})),t.d(n,"n",(function(){return b})),t.d(n,"o",(function(){return f})),t.d(n,"f",(function(){return p})),t.d(n,"p",(function(){return v})),t.d(n,"z",(function(){return j})),t.d(n,"A",(function(){return O})),t.d(n,"x",(function(){return k})),t.d(n,"u",(function(){return w})),t.d(n,"w",(function(){return E})),t.d(n,"t",(function(){return h})),t.d(n,"v",(function(){return g})),t.d(n,"s",(function(){return y})),t.d(n,"k",(function(){return x})),t.d(n,"j",(function(){return _})),t.d(n,"h",(function(){return C})),t.d(n,"i",(function(){return T})),t.d(n,"q",(function(){return S})),t.d(n,"r",(function(){return A})),t.d(n,"l",(function(){return F})),t.d(n,"b",(function(){return W}));var a=t(1231),r=t(15),c=Object(a.a)("div")({name:"Wrapper",class:"w1oe2baa"}),o=Object(a.a)("div")({name:"Header",class:"h4f3mu3"}),s=Object(a.a)("div")({name:"Title",class:"t1i912uk"}),l=Object(a.a)("div")({name:"Desc",class:"dgkzfl6"}),i=Object(a.a)("div")({name:"CloseWrapper",class:"c1yz84kj"}),u=Object(a.a)(r.d)({name:"CloseIcon",class:"c1iyn34x"}),m=Object(a.a)("div")({name:"BlockWrapper",class:"bmn2tn4"}),d=Object(a.a)(r.d)({name:"CheckmarkIcon",class:"c177nl2c"}),b=Object(a.a)(r.d)({name:"OtherIcon",class:"o1sha4fn"}),f=Object(a.a)("div")({name:"ProgressWrapper",class:"p1prpn3v"}),p=Object(a.a)("div")({name:"Content",class:"c19lvhhk"}),v=Object(a.a)("div")({name:"SendWrapper",class:"s1wcgvvt"}),j=Object(a.a)("div")({name:"ValueCurrency",class:"v1y267t2"}),O=Object(a.a)("div")({name:"ValueOriginal",class:"v33wg3"}),k=Object(a.a)("div")({name:"SwapWrapper",class:"sd77she"}),w=Object(a.a)("div")({name:"SwapColumn",class:"s19h1co8"}),E=Object(a.a)("div")({name:"SwapInfo",class:"spgqtm3"}),h=Object(a.a)("div")({name:"SwapBlock",class:"spxj4if"}),g=Object(a.a)(r.d)({name:"SwapIcon",class:"s1733ag7"}),y=Object(a.a)("div")({name:"SwapAmount",class:"s1thhukn"}),x=Object(a.a)("div")({name:"FieldsWrapper",class:"frl1rem"}),_=Object(a.a)("div")({name:"FieldWrapper",class:"fiq91qb"}),C=Object(a.a)("div")({name:"FieldTitle",class:"f1i7cxvz"}),T=Object(a.a)("div")({name:"FieldValue",class:"f1g97ed6"}),S=Object(a.a)(r.d)({name:"ShareIcon",class:"s1r727wv"}),A=Object(a.a)("div")({name:"ShareWrapper",class:"s1uopwlq"}),F=Object(a.a)("div")({name:"Footer",class:"fvtky2j"}),W=Object(a.a)(r.c)({name:"ButtonExplorer",class:"b4w9gxk"});t(1237)},1237:function(e,n,t){},1245:function(e,n,t){},1251:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return A}));var a=t(1),r=t.n(a),c=t(3),o=t(6),s=t(0),l=t.n(s),i=t(21),u=t(1231),m=t(42),d=t(25),b=t.n(d),f=t(175),p=t(64),v=t(15),j=t(124),O=t(35),k=t(257),w=t(186),E=t(1235),h=t(155),g=function(e){var n,t,a=e.params,r=a.fromToken,c=a.fromAmount,o=e.transaction,s=e.isReceiver;return l.a.createElement(E.p,null,l.a.createElement(E.z,null,s?"+":"-"," ",(null===o||void 0===o?void 0:o.short.destinationAmount.toFixed())||r.toMajorDenomination(c).toFixed()," ",(null===o||void 0===o||null===(n=o.short.sourceToken)||void 0===n?void 0:n.symbol)||r.symbol),l.a.createElement(E.A,null,l.a.createElement(h.a,{prefix:s?"+":"-",symbol:(null===o||void 0===o||null===(t=o.short.sourceToken)||void 0===t?void 0:t.symbol)||r.symbol,value:(null===o||void 0===o?void 0:o.short.destinationAmount)||r.toMajorDenomination(c)})))},y=t(45),x=t(104),_=t(77),C=function(e){var n=e.params,t=n.inputTokenName,a=n.outputTokenName,r=n.inputAmount,c=n.minimumOutputAmount,o=Object(y.i)().tokenConfigs;return l.a.createElement(E.x,null,l.a.createElement(E.u,null,l.a.createElement(E.w,null,l.a.createElement(_.a,{symbol:t,size:44}),l.a.createElement(E.s,null,"- ",Object(x.a)(r,o[t].decimals)," ",t))),l.a.createElement(E.t,null,l.a.createElement(E.v,{name:"swap"})),l.a.createElement(E.u,null,l.a.createElement(E.w,null,l.a.createElement(_.a,{symbol:a,size:44}),l.a.createElement(E.s,null,"+ ",Object(x.a)(c,o[a].decimals)," ",a))))},T=Object(u.a)("div")({name:"ProgressLine",class:"p1d4rjaa"}),S="Transaction error",A=function(e){var n,t=e.type,a=e.action,u=e.params,d=e.close,h=Object(i.c)(),y=Object(s.useState)(5),x=Object(o.a)(y,2),_=x[0],A=x[1],F=Object(s.useState)(!1),W=Object(o.a)(F,2),I=W[0],z=W[1],B=Object(s.useState)(null),q=Object(o.a)(B,2),D=q[0],M=q[1],N=Object(i.d)((function(e){return D&&e.transaction.items[D]&&f.a.from(e.transaction.items[D])||null})),V=Object(s.useState)((null===N||void 0===N||null===(n=N.meta)||void 0===n?void 0:n.err)?S:""),P=Object(o.a)(V,2),G=P[0],J=P[1],R=Object(i.d)((function(e){return e.wallet.network.cluster})),Y=Object(i.d)((function(e){return e.wallet.tokenAccounts}));Object(s.useEffect)((function(){var e=5;if(I){var n=setInterval((function(){A(_<=95?e+=7:e=95)}),2500);return function(){clearTimeout(n),A(100)}}}),[I]);var H=function(){var e=Object(c.a)(r.a.mark((function e(){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,z(!0),e.t0=t,e.next="send"===e.t0?5:"swap"===e.t0?13:18;break;case 5:return e.t1=m.e,e.next=8,h(a);case 8:return e.t2=e.sent,n=(0,e.t1)(e.t2),M(n),Object(w.b)({header:"Sent",text:"- ".concat(u.fromToken.toMajorDenomination(u.fromAmount).toFixed()," ").concat(u.fromToken.symbol),symbol:u.fromToken.symbol}),e.abrupt("break",19);case 13:return e.next=15,a();case 15:return c=e.sent,M(c),e.abrupt("break",19);case 18:throw new Error("Wrong type");case 19:e.next=26;break;case 21:e.prev=21,e.t3=e.catch(0),J(e.t3.message),z(!1),"send"===t&&p.b.error(t,e.t3.message);case 26:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){H()}),[]),Object(s.useEffect)((function(){var e=function(){var n=Object(c.a)(r.a.mark((function n(){var t,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(D){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.t0=m.e,n.next=6,h(Object(j.c)(D));case 6:n.t1=n.sent,(t=(0,n.t0)(n.t1))?(null===(a=t.meta)||void 0===a?void 0:a.err)?J(S):G&&J(""):setTimeout(e,3e3),n.next=15;break;case 11:n.prev=11,n.t2=n.catch(2),J(n.t2.message),p.b.error(n.t2.message);case 15:return n.prev=15,z(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,11,15,18]])})));return function(){return n.apply(this,arguments)}}();e()}),[D]);var L,K=Object(s.useMemo)((function(){return!!N&&!!Y.find((function(e){var n;return e.address===(null===(n=N.short.destination)||void 0===n?void 0:n.toBase58())}))}),[null===N||void 0===N?void 0:N.short.destination,Y]),Q=(!D||!N)&&!G,U=D&&N&&!G;return l.a.createElement(E.B,null,l.a.createElement(E.m,null,l.a.createElement(E.y,null,U?"Success":G?"Something went wrong":"send"===t?"Sending...":"Swapping..."),l.a.createElement(E.g,null,U?"send"===t?"You\u2019ve successfully sent ".concat(u.fromToken.symbol):"You\u2019ve successfully swapped tokens":G?"send"===t?"Tokens have not been debited":"Tokens have not been swapped":"Transaction processing"),l.a.createElement(E.e,{onClick:function(){"send"===t?Object(O.b)("send_close_click",{transactionConfirmed:!I}):"swap"===t&&Object(O.b)("swap_close_click",{transactionConfirmed:!I}),d(D)}},l.a.createElement(E.d,{name:"close"})),l.a.createElement(E.a,{className:b()({isProcessing:Q,isSuccess:U,isError:Boolean(G)})},U?l.a.createElement(E.c,{name:"checkmark"}):l.a.createElement(E.n,{name:G?"warning":"timer"}))),l.a.createElement(E.o,null,l.a.createElement(T,{style:{width:"".concat(_,"%")}})),l.a.createElement(E.f,null,"send"===t?l.a.createElement(g,{params:u,transaction:N,isReceiver:K}):void 0,"swap"===t?l.a.createElement(C,{params:u}):void 0,D?l.a.createElement(E.k,null,l.a.createElement(E.j,null,l.a.createElement(E.h,null,"Transaction ID"),l.a.createElement(E.i,null,D," ",l.a.createElement(E.r,{onClick:(L=Object(k.a)("tx",D,R),function(){try{navigator.clipboard.writeText(L),p.b.info("Copied to buffer!")}catch(e){console.error(e)}})},l.a.createElement(E.q,{name:"copy"}))))):void 0),l.a.createElement(E.l,null,G?l.a.createElement(l.a.Fragment,null,l.a.createElement(v.c,{primary:!0,disabled:I,onClick:function(){"send"===t?Object(O.b)("send_try_again_click",{error:G}):"swap"===t&&Object(O.b)("swap_try_again_click",{error:G}),H()}},"Try again"),l.a.createElement(v.c,{lightGray:!0,disabled:I,onClick:function(){"send"===t?Object(O.b)("send_cancel_click",{error:G}):"swap"===t&&Object(O.b)("swap_cancel_click",{error:G}),d(D)}},"Cancel")):l.a.createElement(l.a.Fragment,null,l.a.createElement(v.c,{primary:!0,onClick:function(){"send"===t?Object(O.b)("send_done_click",{transactionConfirmed:!I}):"swap"===t&&Object(O.b)("swap_done_click",{transactionConfirmed:!I}),d(D)}},"Done"),D?l.a.createElement("a",{href:Object(k.a)("tx",D,R),target:"_blank",rel:"noopener noreferrer noindex",onClick:function(){"send"===t?Object(O.b)("send_explorer_click",{transactionConfirmed:!I}):"swap"===t&&Object(O.b)("swap_explorer_click",{transactionConfirmed:!I})},className:"button"},l.a.createElement(E.b,{lightGray:!0},"View in blockchain explorer")):void 0)))};t(1245)}}]);
//# sourceMappingURL=6.bfa259fc.chunk.js.map